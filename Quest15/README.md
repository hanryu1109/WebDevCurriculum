# Quest 15. 자동화된 테스트

## Introduction

- 이번 퀘스트에서는 자동화된 테스트에 어떤 장점이 있는지, 어떤 식으로 구축할 수 있는지에 대해 알아보겠습니다.

## Topics

- Automated Test
  - TDD
  - Unit Test
  - Integration Test
  - E2E Test
  - Stub & Mock
- Jest
- Puppeteer

## Resources

- [Unit Test (단위 테스트) 도입하기](https://www.popit.kr/unit-test-%EB%8B%A8%EC%9C%84-%ED%85%8C%EC%8A%A4%ED%8A%B8-%EB%8F%84%EC%9E%85%ED%95%98%EA%B8%B0-1%ED%8E%B8/)
- [소프트웨어 테스트 안티 패턴](https://velog.io/@leejh3224/%EC%86%8C%ED%94%84%ED%8A%B8%EC%9B%A8%EC%96%B4-%ED%85%8C%EC%8A%A4%ED%8A%B8-%EC%95%88%ED%8B%B0-%ED%8C%A8%ED%84%B4)
- [End-to-End testing with Puppeteer and Jest](https://medium.com/touch4it/end-to-end-testing-with-puppeteer-and-jest-ec8198145321)
- [Mock & Stub](https://stackoverflow.com/questions/3459287/whats-the-difference-between-a-mock-stub)

## Checklist

- 자동화된 테스트를 만드는 것에는 어떤 장점과 단점이 있을까요?
  - 장점
    > - 어플리케이션 기능을 수정한뒤 제대로 작동하는지 확인할 수 있습니다. 리팩토링이 수월해집니다.
    > - 개발 과정에서 미리 문제를 파악할 수 있습니다.
  - 단점
    > - 기존 코드와 테스트코드까지 작성해야 하기 때문에 개발 시간이 오래 걸립니다.
    > - 기존 코드에서 수정이 발생하면 테스트 코드에도 적용해야하기 때문에 유지보수에서도 비용이 들게 됩니다.
  - TDD(Test-Driven Development)란 무엇인가요? TDD의 장점과 단점은 무엇일까요?
    > - 테스트 코드를 먼저 작성하고 테스트 코드의 조건을 충족하는 최소환의 코드를 작성하고 점진적으로 리팩토링하는 방식의 개발 방법입니다.
    - TDD의 장점은:
      > - 테스트를 먼저 작성하므로 코드 작성이전에 코드 구조를 먼저 설계하게 됩니다.
      > - 코드가 간결해지기 때문에 오버 엔지니어링을 막을 수 있습니다.
      > - 디버깅, 리팩토링이 용이하다는 장점이 있습니다.
    - 단점으로는:
      > - 테스트코드를 작성할 경우 개발시간이 길어질 수 있습니다.(생산성 저하)
      > - 테스트코드를 잘 작성하지 않을 경우 리팩토링이나 버그를 찾는데 더 오래 걸릴 수 있습니다.
- 테스트들 간의 계층에 따라 어떤 단계들이 있을까요?

  - 유닛 테스트, 통합 테스트, E2E 테스트는 각각 어떤 것을 뜻하나요?
    > - 유닛 테스트: 개별적인 함수, 클래스, 메서드 등을 테스트하는 테스트로 시간이 적게 걸리고 독립적으로 테스트를 할수 있어야 합니다. 이로 인해 디버깅이 수월한 장점이 있습니다.
    > - 통합 테스트: 통합테스트는 컴포넌트 전체를 테스트합니다. 컴포넌트는 여러 클래스, 메서드, 함수, 모듈, 시스템 일부 혹은 애플리케이션 전체가 될 수 있습니다. 통합 테스트는 특정 데이터를 집어넣은 결과를 살펴보는 테스트입니다. 일반적으로 실행 전에 애플리케이션 배포 및 복잡한 셋업이 필요하고, 외부 시스템은 전부 모킹, 교체되거나 (인메모리(in-memory) 데이터베이스 등) 그대로 사용될 수도 있습니다. 그래서 단위 테스트와달리 테스트 환경을 갖추거나 검증하기 위해 추가적인 준비가 필요할 수 있습니다.
    > - E2E 테스트: 사용자 입장에서 처음부터 끝까지 테스트를 진행하는 테스트입니다. 시스템의 기능과 사용자 경험을 검증하는데 도움이 됩니다.
  - 테스트에 있어서 Stub과 Mock은 어떤 개념을 가리키는 것일까요?
    - Stub:
      > - 사전에 준비된 결과를 반환하는 객체입니다.
      > - 테스트에서 호출된 요청에 대해 미리 준비해둔답변을 응답합니다.
      > - 테스트시에 프로그래밍된 것 외에는 응답하지 않습니다.
    - Mock:
      > - 호출에 대한 기대를 명세하고, 내용에 따라 동작하도록 프로그래밍 된 객체입니다.
      > - 테스트 작성을 위한 환경 구축이 어려울 때, 테스트하고자 하는 코드와 엮인 객ㅊ들을 대신하기 위해 만들어진 객체입니다.
      > - 행위 검증을 진행합니다.

- Jest는 어떤 일을 하며 어떻게 사용하는 테스트 프레임워크일까요?
  > - Jest는 페이스북에서 만든 테스트 프레임워크로 별도의 설정없이 간단하고 빠르게 테스트를 할수 있도록 도와줍니다.
  > - \*.test.js파일을 만든뒤에 test함수로 테스트를 작성하고 jest라는 명령어를 입력하면 .test.js 파일을 모두 실행한뒤에 테스트별로 통과여부를 확인해줍니다.
  - Jest 이외의 테스트 프레임워크는 어떤 것이 있고 어떤 장단점이 있을까요?
    > - mocha: node.js환경에서 테스트를 할수 있도록 도와주는 프레임워크로 다른 프레임워크와 결합해서 사용할수 있는 확장성이 큰 장점이 있지만 다른 프레임워크에 의존성이 큰 단점이 있습니다.
    > - jasmine: jest에 비해 다양한 기본 라이브러리를 지원하는 장점이 있는 프레임워크지만 설정이 복잡하다는 단점이 있습니다.
    <br/>
    <img width="1406" alt="스크린샷 2023-04-07 오전 7 34 11" src="https://user-images.githubusercontent.com/82071500/230506479-49f4b945-c957-4631-b69a-2a86c6489392.png">
- Puppeteer는 어떤
 일을 하며 어떻게 사용하는 테스트 프레임워크일까요?
  > - Puppeteer는 Headless Chrome을 제어하기 위한 편리한 API를 제공하는 Google에서 만든 Node.js 라이브러리입니다. 명령어를 통해 브라우저환경에서 테스트할수있도록 해주는 프레임워크입니다. 서버를 구동시키고 직접 브라우저에 접속해서 손으로 입력하지않고 어떤 엘리먼트를 클릭하고 어떤 값을 넣는지 등에 행동을 코드로 구현될수 있도록 함수를 제공하고 이를 통해 자동화로 e2e테스트를 진행 할수 있습니다.

## Quest

- 직전 퀘스트의 메모장의 서버와 클라이언트 각 부분에 유닛 테스트, 통합 테스트, E2E 테스트 등을 추가해 보세요.
  - `npm test` 명령을 통해 모든 테스트가 돌고 그 결과를 출력할 수 있어야 합니다.

## Advanced

- 테스트의 커버리지는 어떤 개념일까요? 프로젝트에서 테스트의 커버리지는 어떻게 접근하는 것이 좋을까요?
  > - 테스트 커버리지란 시스템 또는 소프트웨어의 테스트를 논할 때 얼마나 테스트가 충분한가를 나타낸 것입니다. 즉, 수행한 테스트가 테스트의 대상을 얼마나 커버했는지를 나타냅니다.
  > - 테스트 커버리지 100%의 함정은 항상 주의해야 합니다.
  >   코드가 실행된다고 해서 모든 버그들이 제어되는 것이 아니기 때문에 테스트 커버리지 100%는 완벽한 소프트웨어를 나타내지 않습니다. 따라서 맹신하면 안되고 주의가 필요합니다. 그렇기에 필요(테스트 커버리지와 실질적으로 테스트할 수 있는 비용)에 맞추어 테스트 커버리지를 설정하고 테스트 해야합니다.
